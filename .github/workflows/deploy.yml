name: 👾  Deploy & Quality
 on:   
  push :
    branches :
      - main 
  workflow_dispatch:

 permissions:
  contents: read
  pages: write
  id-token: write
  
 concurrency: 
   group: ${{github.workflow}}-${{ github.ref }}
   cancel-in-progress: true

 jobs:
  deploy:
     name: 🧟 deploy to Github pages
     runs-on: ubuntu-latest
     if:github.ref =='refs/heads/main'
     outputs:
      page_url: ${{steps.deployment.outputs.page_url}}

 environment:
    name: github-pages
    url: ${{steps.deployment.outputs.page_url}}
 
    steps:
     - name: ☯️ checkout code
       uses: actions/checkout@v4

     - name: 🎶 setup pages
       uses: actions/configure-pages@v4

     - name: 🐗 upload artifact
       uses: actions/uploa-pages-artifact@v4
      with:
        path: "."
        
     - name: 🌀 deploy to Github pages
        id: deployment
      uses: actions/Deploy-pages@v4